"use strict";exports.id=1782,exports.ids=[1782],exports.modules={49147:(e,t,r)=>{r.d(t,{W:()=>a});var s=r(42945);let a={async getChores(e){let t=(0,s.e)();try{let{data:r,error:s}=await t.from("chores").select("*").eq("space_id",e).order("created_at",{ascending:!1});if(s)throw Error(`Failed to fetch chores: ${s.message}`);return r||[]}catch(e){throw console.error("Error in getChores:",e),e}},async getChoreById(e){let t=(0,s.e)();try{let{data:r,error:s}=await t.from("chores").select("*").eq("id",e).single();if(s){if("PGRST116"===s.code)return null;throw Error(`Failed to fetch chore: ${s.message}`)}return r}catch(e){throw console.error("Error in getChoreById:",e),e}},async createChore(e){let t=(0,s.e)();try{let{data:r,error:s}=await t.from("chores").insert(e).select().single();if(s)throw Error(`Failed to create chore: ${s.message}`);return r}catch(e){throw console.error("Error in createChore:",e),e}},async updateChore(e,t){let r=(0,s.e)();try{let s={...t};"completed"!==t.status||s.completed_at||(s.completed_at=new Date().toISOString()),t.status&&"completed"!==t.status&&(s.completed_at=null);let{data:a,error:o}=await r.from("chores").update(s).eq("id",e).select().single();if(o)throw Error(`Failed to update chore: ${o.message}`);return a}catch(e){throw console.error("Error in updateChore:",e),e}},async deleteChore(e){let t=(0,s.e)();try{let{error:r}=await t.from("chores").delete().eq("id",e);if(r)throw Error(`Failed to delete chore: ${r.message}`)}catch(e){throw console.error("Error in deleteChore:",e),e}},async getChoresByUser(e,t){let r=(0,s.e)();try{let{data:s,error:a}=await r.from("chores").select("*").eq("space_id",e).eq("assigned_to",t).order("created_at",{ascending:!1});if(a)throw Error(`Failed to fetch user chores: ${a.message}`);return s||[]}catch(e){throw console.error("Error in getChoresByUser:",e),e}},async getChoresByFrequency(e,t){let r=(0,s.e)();try{let{data:s,error:a}=await r.from("chores").select("*").eq("space_id",e).eq("frequency",t).order("created_at",{ascending:!1});if(a)throw Error(`Failed to fetch chores by frequency: ${a.message}`);return s||[]}catch(e){throw console.error("Error in getChoresByFrequency:",e),e}},subscribeToChores:(e,t)=>(0,s.e)().channel(`chores:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"chores",filter:`space_id=eq.${e}`},e=>{t({eventType:e.eventType,new:e.new,old:e.old})}).subscribe(),async getChoreStats(e,t){let r=await this.getChores(e),s=new Date(new Date().getTime()-6048e5);return{total:r.length,completedThisWeek:r.filter(e=>"completed"===e.status&&e.completed_at&&new Date(e.completed_at)>=s).length,myChores:r.filter(e=>e.assigned_to===t&&"pending"===e.status).length,partnerChores:r.filter(e=>e.assigned_to!==t&&"pending"===e.status).length}}}},83283:(e,t,r)=>{r.d(t,{P:()=>a});var s=r(42945);let a={async getTasks(e,t){let r=(0,s.e)();try{let s=r.from("tasks").select("*").eq("space_id",e);t?.status&&(s=Array.isArray(t.status)?s.in("status",t.status):s.eq("status",t.status)),t?.priority&&(s=Array.isArray(t.priority)?s.in("priority",t.priority):s.eq("priority",t.priority)),t?.category&&(s=s.eq("category",t.category)),t?.assigned_to&&(s=s.eq("assigned_to",t.assigned_to)),t?.created_by&&(s=s.eq("created_by",t.created_by)),t?.search&&(s=s.or(`title.ilike.%${t.search}%,description.ilike.%${t.search}%`));let a=t?.sort||"created_at",o=t?.order==="asc"?{ascending:!0}:{ascending:!1};s=s.order(a,o),t?.limit&&(s=s.limit(t.limit)),t?.offset&&(s=s.range(t.offset,t.offset+(t.limit||10)-1));let{data:c,error:i}=await s;if(i)throw Error(`Failed to fetch tasks: ${i.message}`);return c||[]}catch(e){throw console.error("Error in getTasks:",e),e}},async getTasksPaginated(e,t=1,r=20,a){let o=(0,s.e)();try{let s=(t-1)*r,c=o.from("tasks").select("*",{count:"exact",head:!0}).eq("space_id",e);a?.status&&(c=Array.isArray(a.status)?c.in("status",a.status):c.eq("status",a.status));let{count:i,error:l}=await c;if(l)throw Error(`Failed to get task count: ${l.message}`);let n=await this.getTasks(e,{...a,limit:r,offset:s}),d=i||0,h=s+r<d;return{data:n,total:d,page:t,limit:r,hasMore:h}}catch(e){throw console.error("Error in getTasksPaginated:",e),e}},async getTaskById(e){let t=(0,s.e)();try{let{data:r,error:s}=await t.from("tasks").select("*").eq("id",e).single();if(s){if("PGRST116"===s.code)return null;throw Error(`Failed to fetch task: ${s.message}`)}return r}catch(e){throw console.error("Error in getTaskById:",e),e}},async createTask(e){let t=(0,s.e)();try{let{data:r,error:s}=await t.from("tasks").insert(e).select().single();if(s)throw Error(`Failed to create task: ${s.message}`);return r}catch(e){throw console.error("Error in createTask:",e),e}},async createTasksBatch(e){let t=(0,s.e)();try{let{data:r,error:s}=await t.from("tasks").insert(e).select();if(s)throw Error(`Failed to create tasks: ${s.message}`);return r||[]}catch(e){throw console.error("Error in createTasksBatch:",e),e}},async updateTask(e,t){let r=(0,s.e)();try{let s={...t};"completed"!==t.status||s.completed_at||(s.completed_at=new Date().toISOString()),t.status&&"completed"!==t.status&&(s.completed_at=null);let{data:a,error:o}=await r.from("tasks").update(s).eq("id",e).select().single();if(o)throw Error(`Failed to update task: ${o.message}`);return a}catch(e){throw console.error("Error in updateTask:",e),e}},async updateTasksBatch(e,t){let r=(0,s.e)();try{let s={...t};"completed"!==t.status||s.completed_at||(s.completed_at=new Date().toISOString());let{data:a,error:o}=await r.from("tasks").update(s).in("id",e).select();if(o)throw Error(`Failed to update tasks: ${o.message}`);return a||[]}catch(e){throw console.error("Error in updateTasksBatch:",e),e}},async deleteTask(e){let t=(0,s.e)();try{let{error:r}=await t.from("tasks").delete().eq("id",e);if(r)throw Error(`Failed to delete task: ${r.message}`)}catch(e){throw console.error("Error in deleteTask:",e),e}},async deleteTasksBatch(e){let t=(0,s.e)();try{let{error:r}=await t.from("tasks").delete().in("id",e);if(r)throw Error(`Failed to delete tasks: ${r.message}`)}catch(e){throw console.error("Error in deleteTasksBatch:",e),e}},async getTaskStats(e){let t=(0,s.e)();try{let{data:r,error:s}=await t.from("tasks").select("status, priority").eq("space_id",e);if(s)throw Error(`Failed to get task stats: ${s.message}`);let a=r.length,o=r.filter(e=>"completed"===e.status).length,c=r.filter(e=>"in_progress"===e.status).length,i=r.filter(e=>"pending"===e.status).length,l=r.filter(e=>"cancelled"===e.status).length,n={low:r.filter(e=>"low"===e.priority).length,medium:r.filter(e=>"medium"===e.priority).length,high:r.filter(e=>"high"===e.priority).length,urgent:r.filter(e=>"urgent"===e.priority).length};return{total:a,completed:o,inProgress:c,pending:i,cancelled:l,byPriority:n}}catch(e){throw console.error("Error in getTaskStats:",e),e}},subscribeToTasks:(e,t)=>(0,s.e)().channel(`tasks:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"tasks",filter:`space_id=eq.${e}`},e=>{t({eventType:e.eventType,new:e.new,old:e.old})}).subscribe(),async getTasksByUser(e,t){return(0,s.e)(),this.getTasks(e,{assigned_to:t})},async getTasksByDueDate(e,t,r){let a=(0,s.e)();try{let{data:s,error:o}=await a.from("tasks").select("*").eq("space_id",e).gte("due_date",t).lte("due_date",r).order("due_date",{ascending:!0});if(o)throw Error(`Failed to fetch tasks by due date: ${o.message}`);return s||[]}catch(e){throw console.error("Error in getTasksByDueDate:",e),e}},async getOverdueTasks(e){let t=(0,s.e)();try{let r=new Date().toISOString().split("T")[0],{data:s,error:a}=await t.from("tasks").select("*").eq("space_id",e).lt("due_date",r).neq("status","completed").order("due_date",{ascending:!0});if(a)throw Error(`Failed to fetch overdue tasks: ${a.message}`);return s||[]}catch(e){throw console.error("Error in getOverdueTasks:",e),e}}}},41291:(e,t,r)=>{r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},48998:(e,t,r)=>{r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])}};