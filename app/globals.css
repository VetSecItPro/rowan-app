@import "tailwindcss";

/* Enable class-based dark mode for Tailwind CSS v4 */
@custom-variant dark (&:where(.dark, .dark *));

@theme {
  /* Define custom background images as utilities */
  --background-image-gradient-tasks: linear-gradient(to right, rgb(59 130 246), rgb(37 99 235));
  --background-image-gradient-calendar: linear-gradient(to right, rgb(168 85 247), rgb(147 51 234));
  --background-image-gradient-reminders: linear-gradient(to right, rgb(236 72 153), rgb(219 39 119));
  --background-image-gradient-messages: linear-gradient(to right, rgb(34 197 94), rgb(22 163 74));
  --background-image-gradient-shopping: linear-gradient(to right, rgb(16 185 129), rgb(5 150 105));
  --background-image-gradient-meals: linear-gradient(to right, rgb(249 115 22), rgb(234 88 12));
  --background-image-gradient-projects: linear-gradient(to right, rgb(245 158 11), rgb(217 119 6));
  --background-image-gradient-goals: linear-gradient(to right, rgb(99 102 241), rgb(79 70 229));
  
  /* Define custom animations */
  --animation-bounce-subtle: bounce-subtle 2s ease-in-out infinite;
  --animation-fade-in: fade-in 0.3s ease-in-out;
  --animation-slide-up: slide-up 0.3s ease-out;
  --animation-slide-down: slide-down 0.3s ease-out;
}

@keyframes bounce-subtle {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-8px);
  }
}

@keyframes fade-in {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}

@keyframes slide-up {
  0% {
    transform: translateY(10px);
    opacity: 0;
  }
  100% {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes slide-down {
  0% {
    transform: translateY(-10px);
    opacity: 0;
  }
  100% {
    transform: translateY(0);
    opacity: 1;
  }
}

@layer base {
  :root {
    --background: 0 0% 98%;
    --foreground: 222.2 84% 4.9%;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
  }

  /* Global background colors for light mode */
  body {
    @apply bg-gray-50 dark:bg-black;
  }
}

@layer utilities {
  .gradient-primary {
    @apply bg-gradient-to-r from-purple-600 to-blue-600;
  }

  @keyframes bounce-subtle {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-8px);
    }
  }

  .animate-bounce-subtle {
    animation: bounce-subtle 2s ease-in-out infinite;
  }

  /* Shimmer effect for text and buttons */
  @keyframes shimmer {
    0% {
      background-position: -200% center;
    }
    100% {
      background-position: 200% center;
    }
  }

  .shimmer {
    background: linear-gradient(
      90deg,
      #3b82f6 0%,
      #8b5cf6 25%,
      #ec4899 50%,
      #8b5cf6 75%,
      #3b82f6 100%
    );
    background-size: 200% auto;
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: shimmer 3s linear infinite;
  }

  .shimmer-bg {
    background: linear-gradient(
      90deg,
      #7c3aed 0%,
      #2563eb 25%,
      #7c3aed 50%,
      #2563eb 75%,
      #7c3aed 100%
    );
    background-size: 200% auto;
    animation: shimmer 3s linear infinite;
  }

  /* Feature-specific shimmer backgrounds with solid colors */
  .shimmer-tasks {
    background: linear-gradient(
      90deg,
      #3b82f6 0%,
      #2563eb 50%,
      #3b82f6 100%
    );
    background-size: 200% auto;
    animation: shimmer 3s linear infinite;
  }

  .shimmer-calendar {
    background: linear-gradient(
      90deg,
      #a855f7 0%,
      #9333ea 50%,
      #a855f7 100%
    );
    background-size: 200% auto;
    animation: shimmer 3s linear infinite;
  }

  .shimmer-reminders {
    background: linear-gradient(
      90deg,
      #ec4899 0%,
      #db2777 50%,
      #ec4899 100%
    );
    background-size: 200% auto;
    animation: shimmer 3s linear infinite;
  }

  .shimmer-messages {
    background: linear-gradient(
      90deg,
      #22c55e 0%,
      #16a34a 50%,
      #22c55e 100%
    );
    background-size: 200% auto;
    animation: shimmer 3s linear infinite;
  }

  .shimmer-shopping {
    background: linear-gradient(
      90deg,
      #10b981 0%,
      #059669 50%,
      #10b981 100%
    );
    background-size: 200% auto;
    animation: shimmer 3s linear infinite;
  }

  .shimmer-meals {
    background: linear-gradient(
      90deg,
      #f97316 0%,
      #ea580c 50%,
      #f97316 100%
    );
    background-size: 200% auto;
    animation: shimmer 3s linear infinite;
  }

  .shimmer-projects {
    background: linear-gradient(
      90deg,
      #f59e0b 0%,
      #d97706 50%,
      #f59e0b 100%
    );
    background-size: 200% auto;
    animation: shimmer 3s linear infinite;
  }

  .shimmer-goals {
    background: linear-gradient(
      90deg,
      #6366f1 0%,
      #4f46e5 50%,
      #6366f1 100%
    );
    background-size: 200% auto;
    animation: shimmer 3s linear infinite;
  }

  /* Gradient text with hover shimmer effect */
  .gradient-text {
    background: linear-gradient(
      90deg,
      #7c3aed 0%,
      #2563eb 100%
    );
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    transition: transform 0.2s ease;
  }

  .gradient-text:hover {
    background: linear-gradient(
      90deg,
      #3b82f6 0%,
      #8b5cf6 25%,
      #ec4899 50%,
      #8b5cf6 75%,
      #3b82f6 100%
    );
    background-size: 200% auto;
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: shimmer 3s linear infinite;
    transform: scale(1.02);
  }

  /* Shimmer effect for gradient backgrounds */
  @keyframes shimmer-gradient {
    0% {
      background-position: 0% center;
    }
    100% {
      background-position: 200% center;
    }
  }

  .shimmer-gradient {
    background: linear-gradient(
      90deg,
      #7c3aed 0%,
      #6366f1 25%,
      #3b82f6 50%,
      #6366f1 75%,
      #7c3aed 100%
    );
    background-size: 200% auto;
    animation: shimmer-gradient 4s linear infinite;
  }

  /* Custom scrollbar styling */
  .custom-scrollbar::-webkit-scrollbar {
    width: 8px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
    border-radius: 10px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: linear-gradient(to bottom, rgb(168 85 247), rgb(147 51 234));
    border-radius: 10px;
    transition: background 0.3s ease;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(to bottom, rgb(147 51 234), rgb(126 34 206));
  }

  /* Firefox scrollbar */
  .custom-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: rgb(168 85 247) transparent;
  }

  /* Check-in mood animations */
  @keyframes mood-glow-pulse {
    0%, 100% {
      box-shadow: 0 0 15px rgba(236, 72, 153, 0.3);
    }
    50% {
      box-shadow: 0 0 25px rgba(236, 72, 153, 0.6), 0 0 35px rgba(236, 72, 153, 0.3);
    }
  }

  .mood-selected {
    animation: mood-glow-pulse 2s ease-in-out infinite;
  }

  @keyframes expand-smooth {
    0% {
      opacity: 0;
      max-height: 0;
      transform: translateY(-10px);
    }
    100% {
      opacity: 1;
      max-height: 500px;
      transform: translateY(0);
    }
  }

  .animate-expand {
    animation: expand-smooth 0.3s ease-out forwards;
  }

  @keyframes celebration-pop {
    0% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.1) rotate(5deg);
    }
    100% {
      transform: scale(1) rotate(0deg);
    }
  }

  .animate-celebration {
    animation: celebration-pop 0.5s ease-in-out;
  }

  @keyframes partner-pulse {
    0%, 100% {
      transform: scale(1);
      opacity: 1;
    }
    50% {
      transform: scale(1.05);
      opacity: 0.9;
    }
  }

  .animate-partner-update {
    animation: partner-pulse 1s ease-in-out 2;
  }

  /* Fade in animation for weekly insights */
  @keyframes fadeIn {
    0% {
      opacity: 0;
      transform: translateY(10px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fadeIn {
    animation: fadeIn 0.3s ease-out forwards;
  }

  /* ===== MOBILE OPTIMIZATION UTILITIES ===== */

  /* Mobile-optimized form inputs (48px height minimum) */
  .input-mobile {
    @apply px-4 py-3 text-base md:px-4 md:py-2.5 md:text-sm;
  }

  /* Mobile touch target - buttons (48x48px minimum) */
  .btn-touch {
    @apply px-6 py-3 text-base md:px-5 md:py-2.5 md:text-sm min-w-[120px];
  }

  /* Icon buttons mobile (48x48px) */
  .btn-icon-mobile {
    @apply w-12 h-12 md:w-10 md:h-10;
  }

  /* Hide scrollbar */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Horizontal scroll container */
  .scroll-mobile {
    overflow-x: auto;
    margin-left: -1rem;
    margin-right: -1rem;
    padding-left: 1rem;
    padding-right: 1rem;
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scroll-mobile::-webkit-scrollbar {
    display: none;
  }

  @media (min-width: 640px) {
    .scroll-mobile {
      margin-left: 0;
      margin-right: 0;
      padding-left: 0;
      padding-right: 0;
    }
  }

  /* Modal mobile-optimized */
  .modal-mobile {
    @apply fixed inset-0 z-50;
  }

  .modal-container {
    @apply relative bg-white dark:bg-gray-800 w-full h-full sm:w-auto sm:h-auto sm:max-w-md sm:max-h-[90vh] sm:rounded-xl overflow-y-auto overscroll-contain shadow-2xl;
  }

  /* Dropdown mobile safe */
  .dropdown-mobile {
    @apply max-w-[calc(100vw-2rem)] max-h-[80vh] overflow-y-auto;
  }

  /* Safe area support for iOS notch */
  @supports (padding-bottom: env(safe-area-inset-bottom)) {
    .pb-safe {
      padding-bottom: calc(1.5rem + env(safe-area-inset-bottom));
    }

    .toast-container {
      padding-bottom: calc(16px + env(safe-area-inset-bottom));
    }
  }

  /* Text truncation utilities */
  .truncate-mobile {
    @apply truncate sm:whitespace-normal;
  }

  /* Line clamp utilities */
  .line-clamp-mobile {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Touch feedback */
  .touch-feedback {
    @apply active:scale-95 transition-transform duration-100;
  }

  /* Larger focus rings on mobile */
  .focus-mobile {
    @apply focus:outline-none focus:ring-4 focus:ring-offset-2 md:focus:ring-2;
  }

  /* Stats cards mobile grid */
  .stats-grid-mobile {
    @apply grid grid-cols-1 min-[480px]:grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4 md:gap-6;
  }

  /* Snap scroll for horizontal lists */
  .snap-scroll {
    display: flex;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    gap: 1rem;
    margin-left: -1rem;
    margin-right: -1rem;
    padding-left: 1rem;
    padding-right: 1rem;
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .snap-scroll::-webkit-scrollbar {
    display: none;
  }

  .snap-item {
    flex: none;
    scroll-snap-align: start;
  }

  /* Fade indicators for horizontal scroll */
  .scroll-fade-left {
    @apply absolute left-0 top-0 bottom-0 w-8 bg-gradient-to-r from-white dark:from-gray-900 to-transparent pointer-events-none z-10;
  }

  .scroll-fade-right {
    @apply absolute right-0 top-0 bottom-0 w-8 bg-gradient-to-l from-white dark:from-gray-900 to-transparent pointer-events-none z-10;
  }

  /* Glassmorphism for Sonner Toasts */
  [data-sonner-toast] {
    @apply backdrop-blur-xl border border-gray-200/50 dark:border-gray-700/50 shadow-2xl;
  }

  [data-sonner-toast][data-type="success"] {
    @apply bg-green-50/90 dark:bg-green-900/90;
  }

  [data-sonner-toast][data-type="error"] {
    @apply bg-red-50/90 dark:bg-red-900/90;
  }

  [data-sonner-toast][data-type="warning"] {
    @apply bg-amber-50/90 dark:bg-amber-900/90;
  }

  [data-sonner-toast][data-type="info"] {
    @apply bg-blue-50/90 dark:bg-blue-900/90;
  }

  [data-sonner-toast][data-type="loading"] {
    @apply bg-white/90 dark:bg-gray-800/90;
  }

  /* Mobile-optimized spacing */
  .spacing-mobile {
    @apply gap-3 sm:gap-2;
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  /* Ripple effect for better touch feedback */
  @keyframes ripple-animation {
    to {
      transform: scale(4);
      opacity: 0;
    }
  }

  .ripple {
    position: absolute;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.6);
    transform: scale(0);
    animation: ripple-animation 600ms ease-out;
  }

  /* Active state for better touch feedback */
  .btn-active {
    @apply active:bg-gray-200 dark:active:bg-gray-700;
  }

  /* Larger checkboxes/radios for mobile */
  .checkbox-mobile {
    @apply w-6 h-6 md:w-5 md:h-5;
  }

  /* Mobile-optimized toggle switches */
  .toggle-mobile {
    @apply w-14 h-8 md:w-12 md:h-7;
  }

  /* Word breaking for long text */
  .break-mobile {
    word-break: break-word;
    overflow-wrap: anywhere;
  }

  /* Mobile-first padding adjustments */
  .p-mobile {
    @apply p-4 sm:p-6;
  }

  .px-mobile {
    @apply px-4 sm:px-6;
  }

  .py-mobile {
    @apply py-4 sm:py-6;
  }

  /* Reduced Motion Support - Accessibility */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* Mobile-optimized focus indicators */
  .focus-mobile {
    @apply focus:outline-none focus:ring-4 focus:ring-blue-500 focus:ring-offset-2 md:focus:ring-2;
  }

  /* Landscape orientation optimizations */
  @media (orientation: landscape) and (max-height: 600px) {
    .landscape-compact {
      @apply py-2;
    }

    .landscape-grid-2 {
      @apply grid-cols-2;
    }
  }
}
